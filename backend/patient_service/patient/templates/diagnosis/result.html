<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Kết quả chẩn đoán</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 py-8">
  <div class="max-w-4xl mx-auto">
    <h2 class="text-2xl font-bold mb-6 text-center text-blue-600">🔍 Kết quả chẩn đoán</h2>
    <div id="diagnosisResult" class="bg-white rounded-lg shadow-md p-6">
      <p class="text-center text-gray-600">Đang tải...</p>
    </div>
  </div>

  <script>
    window.addEventListener('load', function() {
      const result = JSON.parse(localStorage.getItem('diagnosisResult'));
      const resultDiv = document.getElementById('diagnosisResult');

      if (!result) {
        resultDiv.innerHTML = '<p class="text-center text-red-600">❌ Không có kết quả chẩn đoán. Vui lòng nhập triệu chứng!</p>';
        return;
      }

      resultDiv.innerHTML = `
        <div class="py-4">
          <p><strong>Chẩn đoán:</strong> ${result.diagnosis}</p>
          <p><strong>Độ tin cậy:</strong> ${(result.confidence * 100).toFixed(2)}%</p>
          <p><strong>Độ không chắc chắn:</strong> ${(result.uncertainty * 100).toFixed(2)}%</p>
          <p><strong>Xét nghiệm đề xuất:</strong> ${result.test_suggested}</p>
          <p><strong>Thuốc đề xuất:</strong> ${result.medicine_suggested}</p>
          <p><strong>Xác suất các bệnh:</strong></p>
          <ul class="list-disc pl-5">
            ${Object.entries(result.probabilities).map(([disease, prob]) => `
              <li>${disease}: ${(prob * 100).toFixed(2)}%</li>
            `).join('')}
          </ul>
        </div>
      `;
    });
  </script>
</body>
</html>